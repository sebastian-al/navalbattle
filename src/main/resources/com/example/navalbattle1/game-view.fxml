<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.*?>

<BorderPane xmlns="http://javafx.com/javafx/17"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.example.navalbattle1.Controller.GameController"
            prefHeight="800.0" prefWidth="1400.0"
            style="-fx-background-color: #0d1b2a;">

    <!-- ================= HEADER ================= -->
    <top>
        <VBox style="-fx-background-color: linear-gradient(to right, #1b263b, #415a77);">
            <HBox alignment="CENTER" spacing="50" style="-fx-padding: 20;">
                <HBox alignment="CENTER" spacing="10" HBox.hgrow="ALWAYS">
                    <Label text="âš“" textFill="#FFD700">
                        <font><Font size="32"/></font>
                    </Label>
                    <Label text="BATALLA NAVAL" textFill="#FFD700">
                        <font><Font name="System Bold" size="28"/></font>
                    </Label>
                </HBox>

                <VBox alignment="CENTER_RIGHT" spacing="5">
                    <Label fx:id="playerNameLabel" text="Jugador: ---" textFill="WHITE">
                        <font><Font name="System Bold" size="16"/></font>
                    </Label>
                    <Label text="Barcos hundidos: 0/10" textFill="#87CEEB"/>
                </VBox>

                <VBox alignment="CENTER_RIGHT" spacing="5">
                    <Label text="Oponente: Computadora" textFill="WHITE">
                        <font><Font name="System Bold" size="16"/></font>
                    </Label>
                    <Label text="Barcos hundidos: 0/10" textFill="#FF6B6B"/>
                </VBox>
            </HBox>

            <HBox alignment="CENTER" style="-fx-background-color: rgba(0,0,0,0.3); -fx-padding: 10;">
                <Label fx:id="turnLabel" text="ðŸŽ¯ Turno del jugador" textFill="#00FF00">
                    <font><Font name="System Bold" size="16"/></font>
                </Label>
            </HBox>
        </VBox>
    </top>

    <!-- ================= CENTRO ================= -->
    <center>
        <HBox alignment="CENTER" spacing="40" style="-fx-padding: 30;">

            <!-- ===== TABLERO JUGADOR ===== -->
            <VBox alignment="TOP_CENTER" spacing="15"
                  style="-fx-background-color: rgba(26, 58, 82, 0.5);
                         -fx-background-radius: 15;
                         -fx-padding: 20;
                         -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.4), 15, 0, 0, 0);">

                <Label text="ðŸ›¡ï¸ TU TERRITORIO" textFill="#87CEEB">
                    <font><Font name="System Bold" size="20"/></font>
                </Label>
                <Label text="(Solo observaciÃ³n)" textFill="#B0BEC5">
                    <font><Font name="System Italic" size="12"/></font>
                </Label>

                <!-- STACKPANE = CAPAS -->
                <StackPane prefWidth="360" prefHeight="360"
                           alignment="TOP_LEFT"
                           style="-fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.5), 10, 0, 0, 5);">

                    <!-- Grid (agua + disparos) -->
                    <GridPane fx:id="positionBoardGrid"
                              hgap="2" vgap="2"
                              prefWidth="360" prefHeight="360"
                              style="-fx-background-color: #001f3f;
                                     -fx-padding: 5;
                                     -fx-border-color: #87CEEB;
                                     -fx-border-width: 3;
                                     -fx-border-radius: 5;
                                     -fx-background-radius: 5;"/>

                    <!-- Capa de barcos 2D del jugador -->
                    <Pane fx:id="playerShipsLayer"
                          mouseTransparent="true"
                          pickOnBounds="false"
                          style="-fx-padding: 5;"/>
                </StackPane>
            </VBox>

            <!-- ===== TABLERO ENEMIGO ===== -->
            <VBox alignment="TOP_CENTER" spacing="15"
                  style="-fx-background-color: rgba(82, 26, 26, 0.5);
                         -fx-background-radius: 15;
                         -fx-padding: 20;
                         -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.4), 15, 0, 0, 0);">

                <Label text="ðŸŽ¯ TERRITORIO ENEMIGO" textFill="#FF6B6B">
                    <font><Font name="System Bold" size="20"/></font>
                </Label>
                <Label text="(Haz clic para disparar)" textFill="#B0BEC5">
                    <font><Font name="System Italic" size="12"/></font>
                </Label>

                <!-- STACKPANE para tablero enemigo con capas -->
                <StackPane prefWidth="360" prefHeight="360"
                           alignment="TOP_LEFT"
                           style="-fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.5), 10, 0, 0, 5);">

                    <!-- Grid enemigo (agua + disparos) -->
                    <GridPane fx:id="mainBoardGrid"
                              hgap="2" vgap="2"
                              prefWidth="360" prefHeight="360"
                              style="-fx-background-color: #3d0a0a;
                                     -fx-padding: 5;
                                     -fx-border-color: #FF6B6B;
                                     -fx-border-width: 3;
                                     -fx-border-radius: 5;
                                     -fx-background-radius: 5;"/>

                    <!-- Capa de barcos 2D enemigos (inicialmente oculta) -->
                    <Pane fx:id="enemyShipsLayer"
                          mouseTransparent="true"
                          pickOnBounds="false"
                          visible="false"
                          style="-fx-padding: 5;"/>
                </StackPane>
            </VBox>

            <!-- ===== PANEL DE INFORMACIÃ“N Y CONTROLES ===== -->
            <VBox alignment="TOP_CENTER"
                  spacing="15"
                  prefWidth="220"
                  style="-fx-background-color: rgba(255,255,255,0.05);
                         -fx-background-radius: 12;
                         -fx-padding: 20;
                         -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.3), 10, 0, 0, 0);">

                <!-- TÃTULO -->
                <Label text="ðŸŽ® Controles"
                       textFill="#FFD700"
                       style="-fx-font-weight: bold;">
                    <font><Font size="18"/></font>
                </Label>

                <Separator style="-fx-background-color: rgba(255,255,255,0.2);"/>

                <!-- BOTÃ“N MOSTRAR/OCULTAR BARCOS ENEMIGOS -->
                <Button fx:id="toggleEnemyShipsButton"
                        text="ðŸ‘ï¸ Ver barcos enemigos"
                        onAction="#handleToggleEnemyShips"
                        prefWidth="180"
                        prefHeight="50"
                        wrapText="true"
                        style="-fx-background-color: linear-gradient(to bottom, #9B59B6, #8E44AD);
                               -fx-text-fill: white;
                               -fx-font-size: 13;
                               -fx-font-weight: bold;
                               -fx-background-radius: 10;
                               -fx-cursor: hand;
                               -fx-effect: dropshadow(three-pass-box, rgba(155,89,182,0.4), 8, 0, 0, 3);"/>

                <Separator style="-fx-background-color: rgba(255,255,255,0.2);"/>

                <!-- INFORMACIÃ“N DEL ESTADO -->
                <VBox spacing="10" alignment="CENTER">
                    <Label text="ðŸ“Š Estado del juego"
                           textFill="#87CEEB"
                           style="-fx-font-weight: bold;">
                        <font><Font size="14"/></font>
                    </Label>

                    <VBox spacing="5" style="-fx-padding: 10; -fx-background-color: rgba(0,0,0,0.3); -fx-background-radius: 8;">
                        <Label text="Tus barcos:" textFill="#B0BEC5">
                            <font><Font size="12"/></font>
                        </Label>
                        <Label text="âœ… Intactos: 10" textFill="#00FF00">
                            <font><Font size="11"/></font>
                        </Label>
                        <Label text="âŒ Hundidos: 0" textFill="#FF6B6B">
                            <font><Font size="11"/></font>
                        </Label>
                    </VBox>

                    <VBox spacing="5" style="-fx-padding: 10; -fx-background-color: rgba(0,0,0,0.3); -fx-background-radius: 8;">
                        <Label text="Barcos enemigos:" textFill="#B0BEC5">
                            <font><Font size="12"/></font>
                        </Label>
                        <Label text="âœ… Intactos: 10" textFill="#00FF00">
                            <font><Font size="11"/></font>
                        </Label>
                        <Label text="âŒ Hundidos: 0" textFill="#FF6B6B">
                            <font><Font size="11"/></font>
                        </Label>
                    </VBox>
                </VBox>

                <Separator style="-fx-background-color: rgba(255,255,255,0.2);"/>

                <!-- ESTADÃSTICAS -->
                <VBox spacing="8" alignment="CENTER">
                    <Label text="ðŸ“ˆ EstadÃ­sticas"
                           textFill="#FFD700"
                           style="-fx-font-weight: bold;">
                        <font><Font size="14"/></font>
                    </Label>

                    <Label text="ðŸŽ¯ Disparos: 0" textFill="#D0D0D0">
                        <font><Font size="11"/></font>
                    </Label>
                    <Label text="ðŸ’£ Impactos: 0" textFill="#D0D0D0">
                        <font><Font size="11"/></font>
                    </Label>
                    <Label text="âŒ Fallos: 0" textFill="#D0D0D0">
                        <font><Font size="11"/></font>
                    </Label>
                    <Label text="ðŸŽ¯ PrecisiÃ³n: 0%" textFill="#D0D0D0">
                        <font><Font size="11"/></font>
                    </Label>
                </VBox>
            </VBox>
        </HBox>
    </center>

    <!-- ================= FOOTER ================= -->
    <bottom>
        <VBox style="-fx-background-color: #1b263b;">
            <HBox alignment="CENTER" spacing="20" style="-fx-padding: 15;">

                <!-- BOTÃ“N SALIR -->
                <Button fx:id="exitButton"
                        text="ðŸšª Salir del juego"
                        onAction="#handleExit"
                        style="-fx-background-color: #C0392B;
                               -fx-text-fill: white;
                               -fx-font-size: 14;
                               -fx-font-weight: bold;
                               -fx-padding: 10 30;
                               -fx-background-radius: 8;
                               -fx-cursor: hand;
                               -fx-effect: dropshadow(three-pass-box, rgba(192,57,43,0.4), 5, 0, 0, 2);"/>

                <!-- BOTÃ“N REINICIAR (opcional) -->
                <Button text="ðŸ”„ Nueva partida"
                        style="-fx-background-color: #27AE60;
                               -fx-text-fill: white;
                               -fx-font-size: 14;
                               -fx-font-weight: bold;
                               -fx-padding: 10 30;
                               -fx-background-radius: 8;
                               -fx-cursor: hand;
                               -fx-effect: dropshadow(three-pass-box, rgba(39,174,96,0.4), 5, 0, 0, 2);"/>
            </HBox>
        </VBox>
    </bottom>
</BorderPane>