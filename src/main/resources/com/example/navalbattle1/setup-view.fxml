<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.*?>

<BorderPane xmlns="http://javafx.com/javafx/17"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.example.navalbattle1.Controller.SetupController"
            prefWidth="1200"
            prefHeight="800"
            style="-fx-background-color: #0d1b2a;">

    <!-- ================= HEADER ================= -->
    <top>
        <VBox style="-fx-background-color: linear-gradient(to right, #1b263b, #415a77);">
            <HBox alignment="CENTER" spacing="15" style="-fx-padding: 20;">
                <Label text="âš“ BATALLA NAVAL" textFill="#FFD700">
                    <font>
                        <Font name="System Bold" size="26"/>
                    </font>
                </Label>
                <Label text="â€” ColocaciÃ³n de la flota" textFill="#B0BEC5">
                    <font>
                        <Font size="16"/>
                    </font>
                </Label>
            </HBox>
        </VBox>
    </top>

    <!-- ================= CENTER ================= -->
    <center>
        <HBox spacing="40"
              alignment="CENTER"
              style="-fx-padding: 30;">

            <!-- ===== PANEL FLOTA ===== -->
            <VBox spacing="15"
                  prefWidth="280"
                  style="-fx-background-color: rgba(255,255,255,0.05);
                         -fx-background-radius: 15;
                         -fx-padding: 20;
                         -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.3), 10, 0, 0, 0);">

                <Label text="ðŸš¢ Flota disponible" textFill="#FFD700">
                    <font>
                        <Font name="System Bold" size="18"/>
                    </font>
                </Label>

                <!-- BARCOS SELECCIONABLES -->
                <VBox spacing="10" style="-fx-padding: 10 0 10 0;">
                    <Button fx:id="carrierButton"
                            onAction="#selectCarrier"
                            prefWidth="240"
                            prefHeight="40"
                            style="-fx-background-color: linear-gradient(to right, #4A90E2, #357ABD);
                                   -fx-background-radius: 8;
                                   -fx-text-fill: white;
                                   -fx-font-size: 14;
                                   -fx-cursor: hand;
                                   -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.2), 5, 0, 0, 2);">
                        <graphic>
                            <Label fx:id="carrierLabel"
                                   text="ðŸ›³ï¸ Portaaviones (4)  x1"
                                   textFill="white"
                                   style="-fx-font-weight: bold;"/>
                        </graphic>
                    </Button>

                    <Button fx:id="submarineButton"
                            onAction="#selectSubmarine"
                            prefWidth="240"
                            prefHeight="40"
                            style="-fx-background-color: linear-gradient(to right, #9B59B6, #8E44AD);
                                   -fx-background-radius: 8;
                                   -fx-text-fill: white;
                                   -fx-font-size: 14;
                                   -fx-cursor: hand;
                                   -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.2), 5, 0, 0, 2);">
                        <graphic>
                            <Label fx:id="submarineLabel"
                                   text="ðŸš‡ Submarino (3)     x2"
                                   textFill="white"
                                   style="-fx-font-weight: bold;"/>
                        </graphic>
                    </Button>

                    <Button fx:id="destroyerButton"
                            onAction="#selectDestroyer"
                            prefWidth="240"
                            prefHeight="40"
                            style="-fx-background-color: linear-gradient(to right, #2ECC71, #27AE60);
                                   -fx-background-radius: 8;
                                   -fx-text-fill: white;
                                   -fx-font-size: 14;
                                   -fx-cursor: hand;
                                   -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.2), 5, 0, 0, 2);">
                        <graphic>
                            <Label fx:id="destroyerLabel"
                                   text="âš¡ Destructor (2)    x3"
                                   textFill="white"
                                   style="-fx-font-weight: bold;"/>
                        </graphic>
                    </Button>

                    <Button fx:id="frigateButton"
                            onAction="#selectFrigate"
                            prefWidth="240"
                            prefHeight="40"
                            style="-fx-background-color: linear-gradient(to right, #FF69B4, #E91E63);
                                   -fx-background-radius: 8;
                                   -fx-text-fill: white;
                                   -fx-font-size: 14;
                                   -fx-cursor: hand;
                                   -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.2), 5, 0, 0, 2);">
                        <graphic>
                            <Label fx:id="frigateLabel"
                                   text="ðŸŽ€ Fragata (1)       x4"
                                   textFill="white"
                                   style="-fx-font-weight: bold;"/>
                        </graphic>
                    </Button>
                </VBox>

                <Separator style="-fx-background-color: rgba(255,255,255,0.2);"/>

                <!-- BOTÃ“N DE ROTACIÃ“N -->
                <VBox alignment="CENTER" spacing="10" style="-fx-padding: 10 0 0 0;">
                    <Label text="ðŸ”„ OrientaciÃ³n del barco"
                           textFill="#FFD700"
                           style="-fx-font-weight: bold;">
                        <font>
                            <Font size="14"/>
                        </font>
                    </Label>

                    <Button fx:id="rotateButton"
                            text="OrientaciÃ³n: Horizontal"
                            onAction="#handleRotate"
                            prefWidth="240"
                            prefHeight="50"
                            style="-fx-background-color: linear-gradient(to bottom, #FF6B35, #F7931E);
                                   -fx-background-radius: 10;
                                   -fx-text-fill: white;
                                   -fx-font-size: 16;
                                   -fx-font-weight: bold;
                                   -fx-cursor: hand;
                                   -fx-effect: dropshadow(three-pass-box, rgba(255,107,53,0.4), 8, 0, 0, 3);
                                   -fx-border-color: #FFD700;
                                   -fx-border-width: 2;
                                   -fx-border-radius: 10;">
                    </Button>

                    <Label text="Haz clic para cambiar entre â†”ï¸ y â†•ï¸"
                           textFill="#B0BEC5"
                           style="-fx-font-style: italic;">
                        <font>
                            <Font size="11"/>
                        </font>
                    </Label>
                </VBox>

                <Separator style="-fx-background-color: rgba(255,255,255,0.2);"/>

                <!-- INSTRUCCIONES -->
                <VBox spacing="8" style="-fx-padding: 10 0 0 0;">
                    <Label text="ðŸ“‹ Instrucciones:"
                           textFill="#87CEEB"
                           style="-fx-font-weight: bold;">
                        <font>
                            <Font size="13"/>
                        </font>
                    </Label>
                    <Label text="1. Selecciona un barco"
                           textFill="#B0BEC5"
                           wrapText="true">
                        <font>
                            <Font size="11"/>
                        </font>
                    </Label>
                    <Label text="2. Cambia orientaciÃ³n si deseas"
                           textFill="#B0BEC5"
                           wrapText="true">
                        <font>
                            <Font size="11"/>
                        </font>
                    </Label>
                    <Label text="3. Arrastra y suelta en el tablero"
                           textFill="#B0BEC5"
                           wrapText="true">
                        <font>
                            <Font size="11"/>
                        </font>
                    </Label>
                </VBox>
            </VBox>

            <!-- ===== TABLERO JUGADOR ===== -->
            <VBox alignment="TOP_CENTER"
                  spacing="15"
                  style="-fx-background-color: rgba(26, 58, 82, 0.5);
                         -fx-background-radius: 15;
                         -fx-padding: 20;
                         -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.4), 15, 0, 0, 0);">

                <Label text="ðŸ›¡ï¸ TU TERRITORIO"
                       textFill="#87CEEB">
                    <font>
                        <Font name="System Bold" size="20"/>
                    </font>
                </Label>

                <Label text="Arrastra los barcos desde el panel izquierdo"
                       textFill="#FFD700"
                       style="-fx-font-weight: bold;">
                    <font>
                        <Font size="13"/>
                    </font>
                </Label>

                <!-- STACKPANE: AGUA + BARCOS -->
                <StackPane prefWidth="360"
                           prefHeight="360"
                           alignment="TOP_LEFT"
                           style="-fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.5), 10, 0, 0, 5);">

                    <!-- Grid base -->
                    <GridPane fx:id="playerBoardGrid"
                              hgap="2"
                              vgap="2"
                              prefWidth="360"
                              prefHeight="360"
                              style="-fx-background-color: #001f3f;
                                     -fx-padding: 5;
                                     -fx-border-color: #87CEEB;
                                     -fx-border-width: 3;
                                     -fx-border-radius: 5;
                                     -fx-background-radius: 5;"/>

                    <!-- Capa de barcos (NO bloquea clics) -->
                    <Pane fx:id="shipsLayer"
                          mouseTransparent="true"
                          pickOnBounds="false"/>
                </StackPane>

                <!-- INDICADOR DE PROGRESO -->
                <HBox alignment="CENTER" spacing="10" style="-fx-padding: 10 0 0 0;">
                    <Label text="â³ Progreso:"
                           textFill="#B0BEC5"
                           style="-fx-font-weight: bold;">
                        <font>
                            <Font size="12"/>
                        </font>
                    </Label>
                    <ProgressBar fx:id="progressBar"
                                 progress="0.0"
                                 prefWidth="200"
                                 prefHeight="20"
                                 style="-fx-accent: #FFD700;"/>
                </HBox>
            </VBox>
        </HBox>
    </center>

    <!-- ================= FOOTER ================= -->
    <bottom>
        <HBox alignment="CENTER"
              spacing="30"
              style="-fx-padding: 20;
                     -fx-background-color: rgba(0,0,0,0.3);">

            <!-- AYUDA -->
            <Button fx:id="helpButton"
                    text="â“ Ayuda"
                    focusTraversable="false"
                    style="-fx-background-color: #34495E;
                           -fx-text-fill: white;
                           -fx-font-size: 14;
                           -fx-padding: 10 20;
                           -fx-background-radius: 8;
                           -fx-cursor: hand;
                           -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.3), 5, 0, 0, 2);"/>

            <!-- CONTINUAR -->
            <Button fx:id="continueButton"
                    text="âž¡ï¸ Ir al tablero enemigo"
                    onAction="#handleContinue"
                    disable="true"
                    style="-fx-background-color: linear-gradient(to right, #27AE60, #229954);
                           -fx-text-fill: white;
                           -fx-font-size: 16;
                           -fx-font-weight: bold;
                           -fx-padding: 12 30;
                           -fx-background-radius: 10;
                           -fx-cursor: hand;
                           -fx-effect: dropshadow(three-pass-box, rgba(39,174,96,0.4), 8, 0, 0, 3);"/>
        </HBox>
    </bottom>

</BorderPane>